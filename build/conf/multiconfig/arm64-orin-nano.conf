MACHINE = "jetson-orin-nano-devkit-nvme"
#MACHINE = "p3768-0000-p3767-0005"
TNSPEC_BOOTDEV:jetson-orin-nano-devkit = "nvme0n1p1"

# Nvidia Jetson Orin Nano 8GB with SD Card Slot (P3767-0005)
#KERNEL_DEVICETREE:jetson-orin-nano-devkit = "tegra234-p3768-0000+p3767-0005-nv-super.dtb"


# override kernel flags to remove 'firmware_class.path=/etc/firmware'
KERNEL_ARGS:jetson-orin-nano-devkit = "mminit_loglevel=4 console=ttyTCU0,115200 fbcon=map:0 nospectre_bhb video=efifb:off console=tty0"



MACHINE_EXTRA_RRECOMMENDS:append:jetson-orin-nano-devkit  = " nv-kernel-module-host1x nv-kernel-module-tegra-drm"

# inserted by meta-tegra orin-nano (keep kernel-module-r8168 from there)
# lernel-module-rtl88x2ce provided by nv-kernel-module-rtl8822ce-
MACHINE_EXTRA_RRECOMMENDS:remove:jetson-orin-nano-devkit = "kernel-module-r8169 kernel-module-realtek kernel-module-rtl88x2ce"
KERNEL_MODULE_AUTOLOAD:append:jetson-orin-nano-devkit  = " host1x tegra-drm"

PREFERRED_PROVIDER_virtual_dtb = "nvidia-kernel-oot"
MACHINE_ESSENTIAL_EXTRA_RDEPENDS += "nvidia-kernel-oot-alsa nvidia-kernel-oot-display"

IMAGE_CLASSES += "image_types_tegra"


TEGRAFLASH_NO_INTERNAL_STORAGE = "1"

# https://github.com/orgs/OE4T/discussions/1286#discussioncomment-6456270
PARTITION_LAYOUT_TEMPLATE = "flash_t234_qspi.xml"
PARTITION_LAYOUT_EXTERNAL = "flash_l4t_external.xml"
